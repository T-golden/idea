<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" class="no-js">
<!-- BEGIN HEAD -->

<head>

	<meta charset="utf-8" />
	<title>teacher page</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	<!-- BEGIN GLOBAL MANDATORY STYLES -->
	<link href="/teacher/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/style-metro.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/style.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/style-responsive.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>
	<link href="/teacher/css/uniform.default.css" rel="stylesheet" type="text/css"/>
	<!-- END GLOBAL MANDATORY STYLES -->
	<!-- BEGIN PAGE LEVEL STYLES --> 
	<link href="/teacher/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>
	<link href="/teacher/css/daterangepicker.css" rel="stylesheet" type="text/css" />
	<link href="/teacher/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen"/>
	<link href="/teacher/css/jquery.easy-pie-chart.css" rel="stylesheet" type="text/css" media="screen"/>
	
	<link href="/home/bootstrap-fileinput-master/css/fileinput.min.css" rel="stylesheet" type="text/css" />
	
	<style>
	/* Border styles */
	#table-1 thead, #table-1 tr {
	border-top-width: 1px;
	border-top-style: solid;
	border-top-color: rgb(230, 189, 189);
	}
	#table-1 {
	border-bottom-width: 1px;
	border-bottom-style: solid;
	border-bottom-color: rgb(230, 189, 189);
	}
	
	/* Padding and font style */
	#table-1 td, #table-1 th {
	padding: 5px 10px;
	font-size: 12px;
	font-family: Verdana;
	color: rgb(177, 106, 104);
	}
	
	/* Alternating background colors */
	#table-1 tr:nth-child(even) {
	background: rgb(238, 211, 210)
	}
	#table-1 tr:nth-child(odd) {
	background: #FFF
	}
	</style>
	
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<body class="page-header-fixed">
	<!-- BEGIN CONTAINER -->
	<div class="page-container">
	<div th:include="teacher/teacher_top :: teacher_top" class="header navbar navbar-inverse navbar-fixed-top" ></div>
	<div th:include="teacher/teacher_menu :: teacher_menu" class="page-sidebar nav-collapse collapse" ></div>
		<!-- BEGIN PAGE -->
		<div class="page-content">
			<!-- BEGIN PAGE CONTAINER-->
			<div class="container-fluid">
				<!-- BEGIN PAGE HEADER-->
				<div class="row-fluid">
					<div class="span12">
						<!-- BEGIN STYLE CUSTOMIZER -->
						<div class="color-panel hidden-phone">
							<div class="color-mode-icons icon-color"></div>
							<div class="color-mode-icons icon-color-close"></div>
							<div class="color-mode">
								<p>THEME COLOR</p>
								<ul class="inline">
									<li class="color-black current color-default" data-style="default"></li>
									<li class="color-blue" data-style="blue"></li>
									<li class="color-brown" data-style="brown"></li>
									<li class="color-purple" data-style="purple"></li>
									<li class="color-grey" data-style="grey"></li>
									<li class="color-white color-light" data-style="light"></li>
								</ul>
								<label>
									<span>Layout</span>
									<select class="layout-option m-wrap small">
										<option value="fluid" selected>Fluid</option>
										<option value="boxed">Boxed</option>
									</select>
								</label>
								<label>
									<span>Header</span>
									<select class="header-option m-wrap small">
										<option value="fixed" selected>Fixed</option>
										<option value="default">Default</option>
									</select>
								</label>
								<label>
									<span>Sidebar</span>
									<select class="sidebar-option m-wrap small">
										<option value="fixed">Fixed</option>
										<option value="default" selected>Default</option>
									</select>
								</label>
								<label>
									<span>Footer</span>
									<select class="footer-option m-wrap small">
										<option value="fixed">Fixed</option>
										<option value="default" selected>Default</option>
									</select>
								</label>
							</div>
						</div>
						<!-- END BEGIN STYLE CUSTOMIZER -->    
						<!-- BEGIN PAGE TITLE & BREADCRUMB-->
						<h3 class="page-title">
							欢迎回来！ <input  type="text" readonly="readonly" class="teacherName" style="border: 0;"></input>
						</h3>
						<ul class="breadcrumb">
							<li class="pull-right no-text-shadow">
								<div id="dashboard-report-range" class="dashboard-date-range tooltips no-tooltip-on-touch-device responsive" data-tablet="" data-desktop="tooltips" data-placement="top" data-original-title="Change dashboard date range"><span></span></div>
							</li>
						</ul>
						<!-- END PAGE TITLE & BREADCRUMB-->
					</div>
				</div>
				<!-- END PAGE HEADER-->
				<div align="center"><h2>教师信息修改</h2></div>
				<h5>教师编号  : <input  type="text"  disabled="" class="teacherId" id="teacherId" th:value="${teacherId}"></input></h5>
				<div id="dashboard" align="center">
					<table id="table-1" border="1" style="width: 100%;">
						<thead>
							<tr>
								<td align="center" colspan="5">个人信息</td>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>姓名 : <input type="text" id="teacherName" class="teacherName"></input></td>
								<td>个人简介 : <textarea rows="10" id="teacherContext" class="teacherContext"></textarea></td>
								<td>性别 : 
									<select id="teacherSex">
									<option value="0">请选择</option>
									<option value="1">男</option>
									<option value="2">女</option>
									</select>
								</td>
								<td>年龄 : <input id="teacherAge" class="teacherAge"></input> 岁</td>
								<td rowspan="3" width="500px;">
									<input type="file" name="txt_file" id="txt_file" multiple class="file-loading" />
								</td>
							</tr>
							<tr>
								<td align="center" colspan="4">联系方式</td>
							</tr>
							<tr>
								<td>Email : <input id="teacherEmail" class="teacherEmail"></input></td>
								<td>手机 : <input id="teacherPhone" class="teacherPhone"></input></td>
								<td>QQ : <input id="teacherQQ" class="teacherQQ"></input></td>
							</tr>
							<tr>
								<td>创建时间 : <span id="createTime" class="createTime"></span></td>
								<td>上次修改时间 : <span id="modifyTime" class="modifyTime"></span></td>
							</tr>
							<tr>
								<td><button id="update_submit">提交修改</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
	<!-- END CONTAINER -->
	<!-- BEGIN FOOTER -->
	<div class="footer">
		<div class="footer-inner">
			2017 &copy; graduation project by Xuyixin from <a href="javascript:volid(0);" title="信息科技学院" target="_blank">信息科技学院</a> - 
		</div>
		<div class="footer-tools">
			<span class="go-top">
			<i class="icon-angle-up"></i>
			</span>
		</div>
	</div>
	<!-- END FOOTER -->
	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
	<!-- BEGIN CORE PLUGINS -->
	<script src="/teacher/js/jquery-1.10.1.min.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="/teacher/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      
	<script src="/teacher/js/bootstrap.min.js" type="text/javascript"></script>
	<!--[if lt IE 9]>
	<script src="/js/excanvas.min.js"></script>
	<script src="/js/respond.min.js"></script>  
	<![endif]-->   
	<script src="/teacher/js/jquery.slimscroll.min.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.blockui.min.js" type="text/javascript"></script>  
	<script src="/teacher/js/jquery.cookie.min.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.uniform.min.js" type="text/javascript" ></script>
	<!-- END CORE PLUGINS -->
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script src="/teacher/js/jquery.vmap.js" type="text/javascript"></script>   
	<script src="/teacher/js/jquery.vmap.russia.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.vmap.world.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.vmap.europe.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.vmap.germany.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.vmap.usa.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.vmap.sampledata.js" type="text/javascript"></script>  
	<script src="/teacher/js/jquery.flot.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.flot.resize.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.pulsate.min.js" type="text/javascript"></script>
	<script src="/teacher/js/date.js" type="text/javascript"></script>
	<script src="/teacher/js/daterangepicker.js" type="text/javascript"></script>     
	<script src="/teacher/js/jquery.gritter.js" type="text/javascript"></script>
	<script src="/teacher/js/fullcalendar.min.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.easy-pie-chart.js" type="text/javascript"></script>
	<script src="/teacher/js/jquery.sparkline.min.js" type="text/javascript"></script>  
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<script src="/teacher/js/app.js" type="text/javascript"></script>
	<script src="/teacher/js/index.js" type="text/javascript"></script>        
	<!-- END PAGE LEVEL SCRIPTS -->  
	<script src="/teacher/js/teacher.config.js" type="text/javascript"></script>
	<script src="/teacher/js/teacher.config.api.js" type="text/javascript"></script> 
	<script src="/home/bootstrap-fileinput-master/js/fileinput.min.js" type="text/javascript"></script>
	<script src="/home/bootstrap-fileinput-master/js/locales/zh.js" type="text/javascript"></script>     
	<script>
		jQuery(document).ready(function() {    
		   App.init(); // initlayout and core plugins
		   getTeacherInfo();
		   $("#update_submit").click(function(){
			   upload();
			   //updateTeacherInfo();
		   });
		   
		 //0.初始化fileinput
	    	var oFileInput = new FileInput();
	    	oFileInput.Init("txt_file", "/homeApi/uploadSave");
		});
		
		
		//初始化fileinput
		var FileInput = function () {
		    var oFile = new Object();

		    //初始化fileinput控件（第一次初始化）
		    oFile.Init = function(ctrlName, uploadUrl) {
		    var control = $('#' + ctrlName);

		    //初始化上传控件的样式
		    control.fileinput({
		        language: 'zh', //设置语言
		        uploadUrl: uploadUrl, //上传的地址
		        allowedFileExtensions: ['jpg', 'gif', 'png'],//接收的文件后缀
		        showUpload: true, //是否显示上传按钮
		        showCaption: false,//是否显示标题
		        browseClass: "btn btn-primary", //按钮样式     
		        //dropZoneEnabled: false,//是否显示拖拽区域
		        //minImageWidth: 50, //图片的最小宽度
		        //minImageHeight: 50,//图片的最小高度
		        maxImageWidth: 400,//图片的最大宽度
		        maxImageHeight: 600,//图片的最大高度
		        //maxFileSize: 0,//单位为kb，如果为0表示不限制文件大小
		        //minFileCount: 0,
		        maxFileCount: 10, //表示允许同时上传的最大文件个数
		        enctype: 'multipart/form-data',
		        validateInitialCount:true,
		        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
		        msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
		    });

		    //导入文件上传完成之后的事件
		    $("#txt_file").on("fileuploaded", function (event, data, previewId, index) {
		        $("#myModal").modal("hide");
		        var data = data.response.lstOrderImport;
		        if (data == undefined) {
		            toastr.error('文件格式类型不正确');
		            return;
		        }
		        //1.初始化表格
		        var oTable = new TableInit();
		        oTable.Init(data);
		        $("#div_startimport").show();
		    });
		}
		    return oFile;
		};
		
		function getTeacherInfo(){
			$.ajax({
				   type : "post",  //提交方式  
				   url :  basePath+"teacherApi/getTeacherInfo?teacherId="+teacherId,	//路径  
				   async:true,    //或false,是否异步
				   data : "jsonResult",//数据，这里使用的是Json格式进行传输  
				   success : function(res) {//返回数据根据结果进行相应的处理 
					   console.log(res);
					   var data = res.data;
					   console.log(data.teacherName);
					   $(".teacherName").val(data.teacherName);
					   $("#teacherContext").val(data.teacherContext);
					   $("#teacherSex").val(data.teacherSex);
					   $("#teacherAge").val(data.teacherAge);
					   $("#teacherEmail").val(data.teacherEmail);
					   $("#teacherPhone").val(data.teacherPhone);
					   $("#teacherQQ").val(data.teacherQQ);
					   
					   
					   var createTime = new Date(data.createTime);
					   var _createTime = createTime.getFullYear() + '-' + (createTime.getMonth() + 1) + '-' + createTime.getDate() + ' ' + createTime.getHours() + ':' + createTime.getMinutes() + ':' + createTime.getSeconds();
					   var modifyTime = new Date(data.modifyTime);
					   var _modifyTime = modifyTime.getFullYear() + '-' + (modifyTime.getMonth() + 1) + '-' + modifyTime.getDate() + ' ' + modifyTime.getHours() + ':' + modifyTime.getMinutes() + ':' + modifyTime.getSeconds();
					   $(".createTime").text(_createTime);
					   $(".modifyTime").text(_modifyTime);
				   }
			});
		}
		
		function upload(){
			
		}
		
		function updateTeacherInfo(){
			var teacherName = $("#teacherName").val();
			var teacherContext = $("#teacherContext").val();
			var teacherSex = $("#teacherSex").val();
			var teacherAge = $("#teacherAge").val();
			var teacherEmail = $("#teacherEmail").val();
			var teacherPhone = $("#teacherPhone").val();
			var teacherQQ = $("#teacherQQ").val();
			$.ajax({
				   type : "post",
				   url :  basePath+"teacherApi/updateTeacherInfo?teacherId="+teacherId+"&teacherName="+teacherName+"&teacherContext="+teacherContext+"&teacherSex="+teacherSex+"&teacherAge="+teacherAge+"&teacherEmail="+teacherEmail+"&teacherPhone="+teacherPhone+"&teacherQQ="+teacherQQ,
				   async:false,
				   success : function(res) {
					   var status = res.status;
					   var msg = res.msg;
					   if(status !=0){
						   alert(msg);
					   }
					   alert(msg);
					   getTeacherInfo();
				   }
			});
		}
		
		
	</script>
	<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>